 @model CinemaBookingWeb.Models.Movies
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_LayoutHome.cshtml";
}

<section class="Trailer">
    <div class="Trailer-container">
        @* Chuyển đổi URL YouTube từ dạng youtu.be thành dạng nhúng *@
        @if (!string.IsNullOrEmpty(Model.TrailerUrl))
        {
            // Lấy ID từ URL
            var videoId = Model.TrailerUrl.Split('/').Last().Split('?').First();
            var embedUrl = $"https://www.youtube.com/embed/{videoId}";

            <iframe width="100%" height="500"
                    src="@embedUrl" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
            </iframe>
        }
        else
        {
            <p>Trailer không khả dụng</p>
        }
    </div>
</section>


<section class="movie-details my-4">
    <div class="container">
        <div class="row align-items-start">
            <!-- Hình ảnh phim -->
            <div class="col-sm-4 col-md-3 text-center">
                <img src="@Model.ImageUrl" alt="@Model.Title" class="img-fluid rounded shadow-sm movie-poster" />
            </div>

            <!-- Thông tin phim -->
            <div class="col-sm-8 col-md-9">
                <h2 class="movie-title mb-3">@Model.Title</h2>
                <div class="movie-info mb-1">
                    <span class="badge bg-warning text-dark me-2">@Model.Rating ⭐</span>
                </div>
                <div class="movie-info mb-1">
                    <span class="text-muted">@Model.Duration phút</span> | <span>@Model.ReleaseDate.ToString("dd/MM/yyyy")</span>
                </div>

                <p><strong>Thể loại:</strong> <span class="badge bg-secondary">@Model.Genre</span></p>
                <p><strong>Ngôn ngữ:</strong> <span class="badge bg-secondary">@Model.Language</span></p>
                </br>
                    <a class="nav-link" asp-action="Index" asp-controller="tickets">
                        <img alt="Ticket" loading="lazy" width="112" height="40" src="~/img/ticket_mua.png">
                    </a>
            </div>
        </div>
        <hr/>
        <!-- Nội dung phim -->
        <div class="row mt-4">
            <div class="col-12">
                <h5 class="text-primary mb-3"><i class="bi bi-info-circle"></i> Nội Dung Phim</h5>
                <p>@Model.Description</p>
            </div>
        </div>
    </div>
</section>







